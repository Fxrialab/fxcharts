<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx"
		width="100%" height="100%">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("fxrialab.controls.charts.CoordinateAxis")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[	
			import flash.text.TextField;
				
			private var maxValue:Number;
			private var minValue:Number;
			private var numberLandMarkBelow:Number;
			private var numberLineLandMark:Number;

			override protected function updateDisplayList(w:Number, h:Number):void {
				super.updateDisplayList(w, h);
				
				maxValue = hostComponent.maxValue;
				minValue = hostComponent.minValue;
				numberLineLandMark = hostComponent.numberLineLandMarkDefault;
				
				numberLineLandMark = Math.ceil(h/40);
				
				numberLandMarkBelow = hostComponent.numberLineLandMarkForNegativeAxis;
				
				//set text format for label field
				var horizontalFormat:TextFormat = new TextFormat();
				horizontalFormat.size = getStyle('sizeDefault');
				horizontalFormat.font = getStyle('fontDefault');
				horizontalFormat.align = getStyle('rightAlign');
				horizontalFormat.color = 0xA0A0A0;
				
				
				var verticalFormat:TextFormat = new TextFormat();
				verticalFormat.size = getStyle('sizeDefault');
				verticalFormat.font = getStyle('fontDefault');
				verticalFormat.align = getStyle('leftAlign');
				
				var titleFormat:TextFormat = new TextFormat();
				titleFormat.size = getStyle('titleSize');
				titleFormat.font = getStyle('titleFont');
				titleFormat.align = getStyle('alignDefault');
				
				var titleLabel:TextField = new TextField();
				titleLabel.text = String(hostComponent.title);
				
				titleLabel.setTextFormat(titleFormat);
				displayLabel.addChild(titleLabel);

				if (hostComponent.orientation == "horizontal") {
					//if negative values were existed with coordinate
					if(hostComponent.minValue){
						//position for title
						titleLabel.x = 0;
						titleLabel.y = h - maxValue - 40 - minValue;
						titleLabel.width = w;
						//============================================
						//draw coordinate for chart
						//============================================
						//draw positive section	
						//draw up horizontal axis
						graphics.clear();
						graphics.lineStyle(1, 0xDADADA);
						graphics.moveTo(hostComponent.marginLeft, h - hostComponent.marginBottom - minValue);
						graphics.lineTo(hostComponent.marginLeft, h - hostComponent.marginBottom - minValue - maxValue);
						//draw vertical axis
						graphics.moveTo(hostComponent.marginLeft-2, h - hostComponent.marginBottom - minValue);
						graphics.lineTo(w - hostComponent.marginRight + 2, h - hostComponent.marginBottom - minValue);
						//draw up percent axis
						graphics.moveTo(w - hostComponent.marginRight, h - hostComponent.marginBottom - minValue);
						graphics.lineTo(w - hostComponent.marginRight, h - hostComponent.marginBottom - minValue - maxValue);
						//draw regative section
						//draw down horizontal axis
						graphics.moveTo(hostComponent.marginLeft, h - hostComponent.marginBottom - minValue);
						graphics.lineTo(hostComponent.marginLeft, h - hostComponent.marginBottom);
						//draw down percent axis
						graphics.moveTo(w - hostComponent.marginRight, h - hostComponent.marginBottom - minValue);
						graphics.lineTo(w - hostComponent.marginRight, h - hostComponent.marginBottom);
						
						//draw landmark gap for positive above section
						for (var j:uint = 1; j <= numberLineLandMark; j++) {
							graphics.moveTo(hostComponent.marginLeft-2, h - hostComponent.marginBottom - ((maxValue)/numberLineLandMark * j) - minValue);
							graphics.lineTo(w - hostComponent.marginRight + 2, h - hostComponent.marginBottom - ((maxValue)/numberLineLandMark * j) - minValue);
						}
						//draw landmark gap for negative below section
						 for (j = 1; j <= numberLandMarkBelow; j++) {
							graphics.moveTo(hostComponent.marginLeft-2, h - hostComponent.marginBottom + (minValue/numberLandMarkBelow * j) - minValue);
							graphics.lineTo(w - hostComponent.marginRight + 2, h - hostComponent.marginBottom + (minValue/numberLandMarkBelow * j) - minValue);
						}  
						//============================================
						//draw label left value and right percent
						//============================================
						for (var k:int = 0; k <= numberLineLandMark; k++) {
							//Draw value label of horizontal axis with positive value
							var positiveAboveValue:TextField = new TextField();
							positiveAboveValue.text = String(Math.ceil(maxValue/numberLineLandMark * k));
							positiveAboveValue.x = - 7;
							positiveAboveValue.y = h - (maxValue/numberLineLandMark * k) - minValue - hostComponent.marginBottom - 5;
							positiveAboveValue.width = 15;
							positiveAboveValue.setTextFormat(horizontalFormat);
							displayLabel.addChild(positiveAboveValue);
						}
						for (k= 1; k <= numberLandMarkBelow; k++) {
							//Draw value label of horizontal axis with negative value
							var negativeBelowValue:TextField = new TextField();
							negativeBelowValue.text = "-" + String(Math.ceil(minValue/numberLandMarkBelow * k));
							negativeBelowValue.x = -7;
							negativeBelowValue.y = h - hostComponent.marginBottom + (minValue/numberLandMarkBelow * k) - minValue - 5;
							negativeBelowValue.width = 15;
							negativeBelowValue.setTextFormat(horizontalFormat);
							displayLabel.addChild(negativeBelowValue);
						}
					}else {
						//position for title
						titleLabel.x = 0;
						titleLabel.y = h - maxValue - 40;
						titleLabel.width = w;
						//============================================
						//draw coordinate for chart
						//============================================
						//draw horizontal axis				
						//graphics.clear();
						graphics.lineStyle(1, 0xDADADA);
					//	graphics.moveTo(hostComponent.marginLeft, h - hostComponent.marginBottom);
					//	graphics.lineTo(hostComponent.marginLeft, h - (maxValue + hostComponent.marginBottom));
						//draw vertical axis
						graphics.moveTo(hostComponent.marginLeft-2, h - hostComponent.marginBottom);
						graphics.lineTo(w - hostComponent.marginRight + 2, h - hostComponent.marginBottom);
						//draw percent axis
					//	graphics.moveTo(w - hostComponent.marginRight, h - hostComponent.marginBottom);
					//	graphics.lineTo(w - hostComponent.marginRight, h - (maxValue + hostComponent.marginBottom));
						
						//draw landmark gap for coordinate axis
						for (j = 1; j <= numberLineLandMark; j++) {
							graphics.moveTo(hostComponent.marginLeft-2, h - hostComponent.marginBottom - (maxValue/numberLineLandMark * j));
							graphics.lineTo(w - hostComponent.marginRight + 2, h - hostComponent.marginBottom - (maxValue/numberLineLandMark * j));
						}
						//============================================
						//draw label left value and right percent
						//============================================
						for (k= 0; k <= numberLineLandMark; k++) {
							//Draw value label of axis
							var leftValue:TextField = new TextField();
							leftValue.text = String(Math.ceil(maxValue/numberLineLandMark * k));
							leftValue.x = - 7;
							leftValue.y = h - (maxValue/numberLineLandMark * k) - (hostComponent.marginBottom+8);
							leftValue.width = 30;
							leftValue.setTextFormat(horizontalFormat);
							displayLabel.addChild(leftValue);

							//Draw percent label of axis
							/* var rightPercent:TextField = new TextField();
							rightPercent.text = String(Math.ceil(100 / numberLineLandMark) * k) + "%";
							rightPercent.x = w - hostComponent.marginRight + 3;
							rightPercent.y = h - (maxValue/numberLineLandMark * k) - (hostComponent.marginBottom+5);
							rightPercent.wordWrap = true;
							
							rightPercent.setTextFormat(verticalFormat);
							displayLabel.addChild(rightPercent); */
						}
					}
					
				}else {
					if(hostComponent.minValue) {
						//position for title
						titleLabel.x = 0;
						titleLabel.y = 0;
						titleLabel.width = hostComponent.maxValue;
						//============================================
						//draw coordinate for chart
						//============================================
						graphics.clear();
						graphics.lineStyle(1, 0xDADADA);
						//draw positive section	
						//draw right vertical axis
						graphics.moveTo(1 + hostComponent.marginLeft + minValue, hostComponent.marginTop);
						graphics.lineTo(1 + hostComponent.marginLeft + maxValue + minValue, hostComponent.marginTop);
						//draw horizontal axis
						graphics.moveTo(1 + hostComponent.marginLeft + minValue, hostComponent.marginTop);
						graphics.lineTo(1 + hostComponent.marginLeft + minValue, h - hostComponent.marginBottom + 2);
						//draw right value axis
						graphics.moveTo(1 + hostComponent.marginLeft + minValue, h - hostComponent.marginBottom);
						graphics.lineTo(1 + hostComponent.marginLeft + maxValue + minValue, h - hostComponent.marginBottom);
						//draw negative section
						//draw left vertical axis
						graphics.moveTo(1 + hostComponent.marginLeft + minValue, hostComponent.marginTop);
						graphics.lineTo(1 + hostComponent.marginLeft, hostComponent.marginTop);
						//draw left value axis
						graphics.moveTo(1 + hostComponent.marginLeft + minValue, h - hostComponent.marginBottom);
						graphics.lineTo(1 + hostComponent.marginLeft, h - hostComponent.marginBottom);
						//draw landmark gap for positive right section
						for (j= 1; j <= numberLineLandMark; j++) {
							graphics.moveTo(1 + hostComponent.marginLeft + (maxValue/numberLineLandMark * j) + minValue, hostComponent.marginTop);
							graphics.lineTo(1 + hostComponent.marginLeft + (maxValue/numberLineLandMark * j) + minValue, h - hostComponent.marginBottom + 2);
						}
						//draw landmark gap for negative left section
						for (j = 1; j <= numberLandMarkBelow; j++) {
							graphics.moveTo(1 + hostComponent.marginLeft - (minValue/numberLandMarkBelow * j) + minValue, hostComponent.marginTop);
							graphics.lineTo(1 + hostComponent.marginLeft - (minValue/numberLandMarkBelow * j) + minValue, h - hostComponent.marginBottom + 2);
						}
						//============================================
						//draw label left value and right percent
						//============================================
						for (k = 0; k <= numberLineLandMark; k++) {
							/* var topPercent:TextField = new TextField();
							topPercent.text = String(Math.ceil(100 / numberLineLandMark) * k) + "%";
							topPercent.x = marginLeft + (sumValue/numberLineLandMark * k) - 3;
							topPercent.y = marginTop - 10;
							
							topPercent.setTextFormat(verticalFormat);
							displayLabel.addChild(topPercent); */
							
							var positiveRightValue:TextField = new TextField();
							positiveRightValue.text = String(Math.ceil(maxValue/numberLineLandMark * k));
							positiveRightValue.x = hostComponent.marginLeft + (maxValue/numberLineLandMark * k) - 3 + minValue;
							positiveRightValue.y = h - hostComponent.marginBottom + 2;
							
							positiveRightValue.setTextFormat(verticalFormat);
							displayLabel.addChild(positiveRightValue);
						}
						for (k = 0; k <= numberLandMarkBelow; k++) {
							var negativeLeftValue:TextField = new TextField();
							negativeLeftValue.text = String(Math.ceil(minValue/numberLandMarkBelow * k));
							negativeLeftValue.x = hostComponent.marginLeft - (minValue/numberLandMarkBelow * k) - 3 + minValue;
							negativeLeftValue.y = h - hostComponent.marginBottom + 2;
							
							negativeLeftValue.setTextFormat(verticalFormat);
							displayLabel.addChild(negativeLeftValue);
						}
					}else {
						//position for title
						titleLabel.x = 0;
						titleLabel.y = 0;
						titleLabel.width = hostComponent.maxValue;
						//draw
						graphics.clear();
						graphics.lineStyle(1, 0xDADADA);
						//draw vertical axis
						graphics.moveTo(1 + hostComponent.marginLeft, hostComponent.marginTop);
						graphics.lineTo(1 + hostComponent.marginLeft + maxValue, hostComponent.marginTop);
						//draw horizontal axis
						graphics.moveTo(1 + hostComponent.marginLeft, hostComponent.marginTop);
						graphics.lineTo(1 + hostComponent.marginLeft, h - hostComponent.marginBottom + 2);
						//draw value axis
						graphics.moveTo(1 + hostComponent.marginLeft, h - hostComponent.marginBottom);
						graphics.lineTo(1 + hostComponent.marginLeft + maxValue, h - hostComponent.marginBottom);
						//draw landmark gap for coordinate axis
						for (j= 1; j <= numberLineLandMark; j++) {
							graphics.moveTo(1 + hostComponent.marginLeft + (maxValue/numberLineLandMark * j), hostComponent.marginTop);
							graphics.lineTo(1 + hostComponent.marginLeft + (maxValue/numberLineLandMark * j), h - hostComponent.marginBottom + 2);
						}
						
						//============================================
						//draw label left value and right percent
						//============================================
						for (k = 0; k <= numberLineLandMark; k++) {
							/* var topPercent:TextField = new TextField();
							topPercent.text = String(Math.ceil(100 / numberLineLandMark) * k) + "%";
							topPercent.x = marginLeft + (sumValue/numberLineLandMark * k) - 3;
							topPercent.y = marginTop - 10;
							
							topPercent.setTextFormat(verticalFormat);
							displayLabel.addChild(topPercent); */
							
							var bottomValue:TextField = new TextField();
							bottomValue.text = String(Math.ceil(maxValue/numberLineLandMark * k));
							bottomValue.x = hostComponent.marginLeft + (maxValue/numberLineLandMark * k) - 3;
							bottomValue.y = h - hostComponent.marginBottom + 2;
							
							bottomValue.setTextFormat(verticalFormat);
							displayLabel.addChild(bottomValue);
						}
					}
				}
			}
		]]>
	</fx:Script>
	<mx:UIComponent id="displayLabel" />
</s:Skin>
